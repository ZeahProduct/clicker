function saveData(){if(null===localStorage.getItem("slots")&&localStorage.setItem("slots",JSON.stringify([0,0,0,0,0,0,0,0,0,0,0,0])),null===localStorage.getItem("workerSlots")&&localStorage.setItem("workerSlots",JSON.stringify([0,0,0,0,0])),null===localStorage.getItem("waitTime")?localStorage.setItem("waitTime",5e3):localStorage.setItem("waitTime",waitTime),null===localStorage.getItem("trash"))localStorage.setItem("trash",0);else{var a=$(".trash-box").find("img");a.length>0?localStorage.setItem("trash",a[0].src):localStorage.setItem("trash",0)}localStorage.setItem("highestBar",highestBar);var e=0,r=JSON.parse(localStorage.getItem("slots"));$(".grid-box").each(function(){var a=$(this).find(".grid-image");a.length>0?r[e]=a[0].src:r[e]=0,e++}),localStorage.setItem("slots",JSON.stringify(r));var e=0,r=JSON.parse(localStorage.getItem("workerSlots"));$(".deposit-box").each(function(){var a=$(this).find(".grid-image");a.length>0?r[e]=a[0].src:r[e]=0,e++}),localStorage.setItem("workerSlots",JSON.stringify(r))}function loadData(){if(null!==localStorage.getItem("slots")){a=0;$(".grid-box").each(function(){var e=JSON.parse(localStorage.getItem("slots"))[a];if(0!=e){var r=e.split("/"),t=r[r.length-1];this.innerHTML='<img src="images/'+t+'" class="grid-image" draggable="false">'}a++})}if(null!==localStorage.getItem("workerSlots")){var a=0;$(".deposit-box").each(function(){var e=JSON.parse(localStorage.getItem("workerSlots"))[a];if(0!=e){var r=e.split("/"),t=r[r.length-1];this.innerHTML='<img src="images/'+t+'" class="grid-image" draggable="false">'}a++})}if(null!==localStorage.getItem("waitTime")){var e=parseInt(localStorage.getItem("waitTime"));waitTime=e,$(".progress-fill").css("animation-duration",e/1e3+"s")}if(null!==localStorage.getItem("trash")){var r=localStorage.getItem("trash");if("0"!=r){var t=r.split("/"),s=t[t.length-1];$(".trash-box").html('<i class="fas fa-trash-alt"></i><img src="images/'+s+'" class="grid-image" draggable="false">')}}null!==localStorage.getItem("highestBar")&&(highestBar=parseInt(localStorage.getItem("highestBar"))),$(function(){for(var a=0;a<highestBar;a++)$("img").filter("[src='images/hiddenbar.png']").first().attr("src",bars[a]);$(".grid-image").draggable({revert:!0}),$(".trash-box").droppable({drop:function(a,e){var r=$(e.draggable)[0],t=($(this).find("i")[0],$(e.draggable).attr("src")),s=($(this).find("img").attr("src"),t.split("/")),i=s[s.length-1];$(this).html('<i class="fas fa-trash-alt"></i><img src="images/'+i+'" class="grid-image" draggable="false">'),$(this).find(".grid-image").draggable({revert:!0}),r.outerHTML="",saveData()}}),$(".deposit-box").droppable({drop:function(a,e){var r=$(e.draggable)[0],t=$(this).find("img")[0],s=$(e.draggable).attr("src"),i=$(this).find("img").attr("src");if(s==i&&r!==t){if(s!=bars[bars.length-1]){var g=bars.indexOf(s)+1;t.src=bars[g],r.outerHTML="",parseInt(localStorage.getItem("highestBar"))<g+1&&(highestBar=g+1,$("img").filter("[src='images/hiddenbar.png']").first().attr("src",bars[g])),saveData()}}else if(i){if(s!=i){var l=s;r.src=i,t.src=l,saveData()}}else{var o=s.split("/"),n=o[o.length-1];$(this).html('<img src="images/'+n+'" class="grid-image" draggable="false">'),$(this).find(".grid-image").draggable({revert:!0}),r.outerHTML="",saveData()}}}),$(".grid-box").droppable({drop:function(a,e){var r=$(e.draggable)[0],t=$(this).find("img")[0],s=$(e.draggable).attr("src"),i=$(this).find("img").attr("src");if(s==i&&r!==t){if(s!=bars[bars.length-1]){var g=bars.indexOf(s)+1;t.src=bars[g],r.outerHTML="",parseInt(localStorage.getItem("highestBar"))<g+1&&(highestBar=g+1,$("img").filter("[src='images/hiddenbar.png']").first().attr("src",bars[g])),saveData()}}else if(i){if(s!=i){var l=s;r.src=i,t.src=l,saveData()}}else{var o=s.split("/"),n=o[o.length-1];$(this).html('<img src="images/'+n+'" class="grid-image" draggable="false">'),$(this).find(".grid-image").draggable({revert:!0}),r.outerHTML="",saveData()}}})})}function newBar(){var a=document.getElementsByClassName("grid-box");if(document.getElementsByClassName("grid-image").length<a.length+6){var e=$(".grid-box:not(:has(img))")[0];e&&(e.innerHTML='<img src="images/bronzebar.png" class="grid-image" draggable="false">',$(e).find(".grid-image").draggable({revert:!0}))}highestBar<1&&(highestBar=1,$("img").filter("[src='images/hiddenbar.png']").first().attr("src",bars[0])),saveData()}function updateSpeed(){clearInterval(spawnTimer),$(".progress-fill").css("animation-duration",waitTime/1e3+"s"),$(".progress-fill")[0].classList.remove("progress-animated"),$(".progress-fill")[0].offsetWidth,$(".progress-fill")[0].classList.add("progress-animated"),spawnTimer=setInterval(newBar,waitTime)}function upgradeSpeed(){for(var a=JSON.parse(localStorage.getItem("workerSlots")),e=0,r=0;r<a.length&&a[r];r++)a[r].includes("goldbar")&&e++;e>=5&&($(".deposit-box").html(""),waitTime*=.9,updateSpeed(),saveData())}var bars=["images/bronzebar.png","images/ironbar.png","images/silverbar.png","images/goldbar.png","images/platinumbar.png","images/mithrilbar.png","images/uraniumbar.png","images/lavabar.png","images/lunarbar.png","images/astralbar.png","images/duskbar.png","images/aquaticbar.png"],highestBar=0,waitTime=5e3;loadData();var spawnTimer=setInterval(newBar,waitTime);